{var component={name:"cloze_builder",ccm:"https://akless.github.io/ccm/ccm.js",config:{html:{id:"main",inner:[{tag:"legend",class:"text-primary",inner:"Build your Fill-in-the-Blank Text"},{tag:"form",class:"form-horizontal",onsubmit:"%submit%",inner:[{class:"text form-group",inner:[{tag:"label",for:"text",class:"control-label col-md-2",inner:"Your Text:"},{class:"col-md-10",id:"text"}]},{class:"blank form-group",inner:[{tag:"label",for:"blank",class:"control-label col-md-2",inner:"Blank Gaps:"},{class:"col-md-10",inner:{class:"checkbox",onchange:"%change%",inner:{tag:"label",inner:{tag:"input",type:"checkbox",id:"blank",name:"blank"}}}}]},{class:"keywords form-group",inner:[{tag:"label",for:"keywords",class:"control-label col-md-2",inner:"Provided Answers:"},{class:"col-md-10",inner:[{inner:{tag:"select",onchange:"%change%",class:"form-control",id:"keywords",name:"keywords",inner:[{tag:"option",inner:"None",value:"none"},{tag:"option",inner:"Auto generated",value:"auto"},{tag:"option",inner:"Manually",value:"manually"}]}},{inner:{tag:"input",type:"text",onchange:"%change%",class:"form-control",id:"manually",name:"manually",placeholder:"Comma-separated list of provided answers"}}]}]},{class:"start_button form-group",inner:[{tag:"label",for:"start_button",class:"control-label col-md-2",inner:"Start Button:"},{class:"col-md-10",inner:{class:"checkbox",onchange:"%change%",inner:{tag:"label",inner:{tag:"input",type:"checkbox",id:"start_button",name:"start_button"}}}}]},{class:"captions_start form-group",inner:[{tag:"label",for:"captions_start",class:"control-label col-md-2",inner:"Start Button Caption:"},{class:"col-md-10",inner:{tag:"input",type:"text",onchange:"%change%",class:"form-control",id:"captions_start",name:"captions.start"}}]},{class:"feedback form-group",inner:[{tag:"label",for:"feedback",class:"control-label col-md-2",inner:"Feedback:"},{class:"col-md-10",inner:{tag:"select",onchange:"%change%",class:"form-control",id:"feedback",name:"feedback",inner:[{tag:"option",inner:"None",value:"none"},{tag:"option",inner:"Show only correctness",value:"correctness"},{tag:"option",inner:"Show correctness and solutions",value:"solutions"}]}}]},{class:"captions_submit form-group",inner:[{tag:"label",for:"captions_submit",class:"control-label col-md-2",inner:"Submit Button Caption:"},{class:"col-md-10",inner:{tag:"input",type:"text",onchange:"%change%",class:"form-control",id:"captions_submit",name:"captions.submit"}}]},{class:"onfinish_restart form-group",inner:[{tag:"label",for:"onfinish_restart",class:"control-label col-md-2",inner:"Restart after Finish:"},{class:"col-md-10",inner:{class:"checkbox",onchange:"%change%",inner:{tag:"label",inner:{tag:"input",type:"checkbox",id:"onfinish_restart",name:"onfinish.restart"}}}}]},{class:"captions_finish form-group",inner:[{tag:"label",for:"captions_finish",class:"control-label col-md-2",inner:"Finish Button Caption:"},{class:"col-md-10",inner:{tag:"input",type:"text",onchange:"%change%",class:"form-control",id:"captions_finish",name:"captions.finish"}}]},{class:"user form-group",inner:[{tag:"label",for:"user",class:"control-label col-md-2",inner:"Sign-on:"},{class:"col-md-10",inner:{tag:"select",onchange:"%change%",class:"form-control",id:"user",name:"user",inner:[{tag:"option",inner:"None",value:""},{tag:"option",inner:"Guest Mode",value:"['ccm.instance','https://akless.github.io/ccm-components/user/ccm.user.js',{'sign_on':'guest'}]"},{tag:"option",inner:"Demo Mode",value:"['ccm.instance','https://akless.github.io/ccm-components/user/versions/ccm.user-2.0.0.min.js',{'sign_on':'demo'}]"},{tag:"option",inner:"H-BRS FB02",value:"['ccm.instance','https://akless.github.io/ccm-components/user/versions/ccm.user-2.0.0.min.js',{'sign_on':'hbrsinfkaul'}]"}]}}]},{class:"time form-group",inner:[{tag:"label",for:"time",class:"control-label col-md-2",inner:"Time Limit:"},{class:"col-md-10",inner:{tag:"input",type:"number",onchange:"%change%",class:"form-control",id:"time",name:"time",placeholder:"Time in seconds"}}]},{class:"css form-group",inner:[{tag:"label",for:"css",class:"control-label col-md-2",inner:"Layout:"},{class:"col-md-10",inner:{tag:"select",onchange:"%change%",class:"form-control",id:"css",name:"css",inner:[{tag:"option",inner:"Default",value:"['ccm.load','https://akless.github.io/ccm-components/cloze/resources/default.css']"},{tag:"option",inner:"LEA-like",value:"['ccm.load','https://akless.github.io/ccm-components/cloze/resources/lea.css']"},{tag:"option",inner:"PBWorks-like",value:"['ccm.load','https://akless.github.io/ccm-components/cloze/resources/pbworks.css','https://cdnjs.cloudflare.com/ajax/libs/normalize/7.0.0/normalize.min.css']"}]}}]},{class:"preview",inner:[{tag:"legend",class:"legend text-primary",inner:"Here's a Preview of what you've Build"},{id:"preview"}]},{class:"submit submit-button form-group",inner:[{class:"col-md-12 text-right",inner:{tag:"input",type:"submit",id:"submit",class:"btn btn-primary"}}]}]}]},css:["ccm.load","https://tkless.github.io/ccm-components/lib/bootstrap/css/bootstrap.css",{context:"head",url:"https://tkless.github.io/ccm-components/lib/bootstrap/css/font-face.css"}],editor:["ccm.component","https://tkless.github.io/ccm-components/editor/versions/ccm.editor-1.0.0.min.js",{"settings.modules.toolbar":[[{size:["small",false,"large","huge"]}],["bold","italic","underline"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]}],[{align:[]}]],"settings.placeholder":"Type here..."}],target:["ccm.component","../cloze/ccm.cloze.js"],submit_button:true,preview:true,onfinish:{log:true}},Instance:function(){const self=this;let my;let $;let editor;this.ready=(callback=>{$=self.ccm.helper;my=$.privatize(self);prepareStartValues();callback();function prepareStartValues(){my.start_values=my.start_values?$.toDotNotation(my.start_values):{};let config=$.clone(my.target.config);delete config.ccm;delete config.html;delete config.parent;config.css=$.encode(config.css);config=$.toDotNotation(config);config["captions.finish"]="Restart";for(const key in config)if(my.start_values[key]===undefined)my.start_values[key]=config[key];if(Array.isArray(my.start_values.keywords))my.start_values.manually=my.start_values.keywords.join(", ");my.start_values.keywords=my.start_values.keywords?my.start_values.keywords===true?"auto":"manually":"none";my.start_values.feedback=my.start_values.feedback?my.start_values.solutions?"solutions":"correctness":"none";delete my.start_values.solutions;my.start_values=$.protect(my.start_values)}});this.start=(callback=>{$.setContent(self.element,$.html(my.html,{submit:self.submit,change:onChange}));my.editor.start(function(instance){$.setContent(self.element.querySelector("#text"),instance.root);editor=instance;editor.get().on("text-change",onChange);for(const key in my.start_values){let element=self.element.querySelector('[name="'+key+'"]');switch(key){case"captions.start":case"captions.cancel":case"captions.submit":case"captions.finish":case"manually":case"time":if(element)element.value=my.start_values[key];break;case"start_button":case"blank":case"cancel_button":case"onfinish.restart":if(my.start_values[key]===true&&element)element.checked=true;break;case"css":case"keywords":case"feedback":case"user":element=self.element.querySelector('select[name="'+key+'"] option[value="'+my.start_values[key]+'"]');if(element)element.selected=true;break;case"text":editor.get().root.innerHTML=my.start_values[key];break}}setVisibility();if(my.preview)updatePreview();else $.removeElement(self.element.querySelector(".preview"));if(!my.submit_button)$.removeElement(self.element.querySelector(".submit"));if(typeof my.submit_button==="string")self.element.querySelector("#submit").value=my.submit_button;if(callback)callback()});function setVisibility(){self.element.querySelector(".captions_start").style.display=getInputElementByName("start_button").checked?"block":"none";self.element.querySelector(".captions_submit").style.display=getInputElementByName("feedback").value!=="none"?"block":"none";self.element.querySelector(".captions_finish").style.display=getInputElementByName("onfinish.restart").checked?"block":"none";getInputElementByName("manually").style.display=getInputElementByName("keywords").value==="manually"?"block":"none";function getInputElementByName(name){return self.element.querySelector('[name="'+name+'"]')}}function onChange(){setVisibility();updatePreview();self.onchange&&self.onchange(self)}function updatePreview(){if(!my.preview)return;my.target.start(self.getValue(),instance=>$.setContent(self.element.querySelector("#preview"),instance.root))}});this.submit=(event=>{if(event)event.preventDefault();if(self.onfinish)$.onFinish(self)});this.getValue=(()=>{let result=$.formData(self.element.querySelector("form"));result.text=editor.get().root.innerHTML;if(result.keywords==="manually"){const manually=result.manually.split(",");manually.map(keyword=>keyword.trim());result.keywords=manually}else result.keywords=result.keywords==="auto";delete result.manually;result.solutions=result.feedback==="solutions";result.feedback=result.feedback!=="none";if(!result["onfinish.restart"])delete result["onfinish.restart"];else result["onfinish.log"]=true;result=$.solveDotNotation(result);$.decode(result);return result})}};function p(){window.ccm[v].component(component)}const f="ccm."+component.name+(component.version?"-"+component.version.join("."):"")+".js";if(window.ccm&&null===window.ccm.files[f])window.ccm.files[f]=component;else{const n=window.ccm&&window.ccm.components[component.name];n&&n.ccm&&(component.ccm=n.ccm),"string"==typeof component.ccm&&(component.ccm={url:component.ccm});var v=component.ccm.url.split("/").pop().split("-");if(v.length>1?(v=v[1].split("."),v.pop(),"min"===v[v.length-1]&&v.pop(),v=v.join(".")):v="latest",window.ccm&&window.ccm[v])p();else{const e=document.createElement("script");document.head.appendChild(e),component.ccm.integrity&&e.setAttribute("integrity",component.ccm.integrity),component.ccm.crossorigin&&e.setAttribute("crossorigin",component.ccm.crossorigin),e.onload=function(){p(),document.head.removeChild(e)},e.src=component.ccm.url}}}